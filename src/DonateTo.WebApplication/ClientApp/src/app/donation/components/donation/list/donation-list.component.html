<nz-table [nzData]="editCache" [nzLoading]="isLoading">
  <thead>
    <tr>
      <th nzColumnKey="itemName" nzWidth="25%">Item</th>
      <th nzColumnKey="quantity" nzWidth="10%">Quantity requested</th>
      <th nzColumnKey="description" nzWidth="40%">Description</th>
      <th nzColumnKey="quantityToDonate" nzWidth="10%">Quantity to donate</th>
      <th nzColumnKey="operation">operation</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let data of editCache">
      <td>{{ data.item.name }}</td>
      <td>{{ data.item.finishQuantity - data.item.currentQuantity }} {{ data.item.unit }}</td>
      <td>{{ data.item.observation }}</td>
      <ng-container *ngIf="!data.edit; else editTemplate">
        <td>{{ data.quantityToDonate }}</td>
        <td><a (click)="startEdit(data.id)">Edit</a></td>
      </ng-container>
      <ng-template #editTemplate>
        <td>
          <nz-input-number
            [(ngModel)]="data.quantityToDonate"
            [nzMin]="0"
            [nzMax]="data.item.finishQuantity - data.item.currentQuantity"
          ></nz-input-number>
        </td>
        <td>
          <a (click)="saveEdit(data.id)" class="save">Save</a>
          <a
            nz-popconfirm
            nzPopconfirmTitle="Sure to cancel?"
            nzPopconfirmPlacement="top"
            (nzOnConfirm)="cancelEdit(data.id)"
            >Cancel</a
          >
        </td>
      </ng-template>
    </tr>
  </tbody>
</nz-table>
